CSRF（Cross-site request forgery）跨站请求伪造：攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。

一个典型的CSRF攻击有着如下的流程：

> *受害者登录a.com，并保留了登录凭证（Cookie）。
>
> *攻击者引诱受害者访问了b.com。
>
> *b.com 向 a.com 发送了一个请求：a.com/act=xx。浏览器会默认携带a.com的Cookie。
>
> *a.com接收到请求后，对请求进行验证，并确认是受害者的凭证，误以为是受害者自己发送的请求。
>
> *a.com以受害者的名义执行了act=xx。
>
> *攻击完成，攻击者在受害者不知情的情况下，冒充受害者，让a.com执行了自己定义的操作。

服务端的CSRF方式方法很多样，但总的思想都是一致的，就是在客户端页面增加伪随机数。

**检查Referer字段**：通过检查HTTP请求的Referer字段是否属于本站域名，非本站域名的请求进行拒绝。陷阱：一是需要处理Referer为空的情况，二是要处理部分匹配的情况。

**添加校验Token**：服务器生成伪随机数作为token，附加在表单的隐藏字段发给用户。当客户端通过表单提交请求时，这个token也一并提交以供后台校验，拒绝掉校验不通过的请求；注意避免token可构造的情况。

